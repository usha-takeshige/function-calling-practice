# 機能要件定義書

`doc/use_cases.md` に記載されたユースケースに基づく、Webアプリケーションの機能要件を定義します。

## 1. アプリケーションの目的
ユーザーが手元のCSVファイルをブラウザ上で手軽に読み込み、必要なデータの抽出・整形（列選択、ソート、フィルタリング）を行い、その結果をCSVファイルとしてダウンロードできるようにすること。

## 2. 機能一覧

### 2.1 ファイル操作
- **CSVアップロード (UC-1)**
  - ドラッグ＆ドロップによるファイル入力を受け付ける。
  - 読み込み時にCSV形式以外のファイルが渡された場合、エラーメッセージを表示する。
  - ファイル読み込み完了後、メイン画面へ遷移する。

- **CSVエクスポート (UC-5)**
  - 現在の画面表示（列の選択状態、ソート順序、フィルタリング結果）を反映したCSVファイルを生成する。
  - 生成したCSVファイルをダウンロード可能にする。

### 2.2 データ表示・操作
- **データテーブル表示**
  - 解析したCSVデータを表形式で表示する。
  - ヘッダー行とデータ行を区別して表示する。

- **列の表示/非表示 (UC-2)**
  - 読み込んだCSVの全列名を一覧表示する（例：チェックボックスリスト）。
  - ユーザーが選択した列のみをテーブルに表示する。
  - チェックのON/OFF操作により、テーブル表示を即座に更新する。

- **データのソート (UC-3)**
  - 各列のヘッダーをクリックすることで、その列を基準に行を並び替える。
  - クリックするたびに「昇順」「降順」を切り替える。
  - ソート状態（どの列でソートされているか、昇順/降順）を視覚的に表示する（例：矢印アイコン）。

- **データのフィルタリング (UC-4)**
  - 検索ボックスに入力されたキーワードに基づいて行を絞り込む。
  - 部分一致などの条件で行を抽出して表示する。
  - フィルタリング結果をリアルタイム（または確定操作後）にテーブルへ反映する。

## 3. ユーザーインターフェース (UI)
### 3.1 初期画面
- **ドラッグ＆ドロップエリア**: 画面中央に配置し、ファイルをドロップできることを明示する。
- **その他の要素**: メニューやボタンなどは非表示とする。

### 3.2 メイン画面（データ読み込み後）
- **上部エリア**:
  - 列選択メニュー（ドロップダウンやパネル形式など）。
  - 検索/フィルタ入力欄。
  - エクスポートボタン。
- **メインエリア**:
  - データ表示テーブル。スクロール可能な領域を確保する。
