# CSVデータ操作・エクスポートアプリ：ユースケース詳細

## 1. アプリケーション概要

ユーザーが手元のCSVファイルをアップロードし、ブラウザ上で必要な列の選択、並び替え、絞り込みを行い、加工後のデータを保存するためのツール。

## 2. アクター

- **一般ユーザー**: CSVデータの簡易的な可視化・加工を行いたい利用者。

## 3. ユースケース一覧

| ID   | ユースケース名                     | 概要                                                   |
| ---- | ---------------------------------- | ------------------------------------------------------ |
| UC-1 | CSVファイルのアップロード          | 初期画面からファイルを投入し、解析を開始する。         |
| UC-2 | 表示列の選択                       | 読み込んだデータの中から表示・操作したい列を指定する。 |
| UC-3 | データのソート（並び替え）         | 特定の列を基準に行の順序を変更する。                   |
| UC-4 | データのフィルタリング（絞り込み） | 条件を入力して特定のデータを含む行だけを抽出する。     |
| UC-5 | 加工済みデータのエクスポート       | ソート・フィルタリング後の状態をCSVとして出力する。    |

---

## 4. ユースケース詳細

### UC-1: CSVファイルのアップロード

- **アクター**: ユーザー
- **事前条件**: アプリケーションがブラウザで開かれていること。
- **メインフロー**:
  1. ユーザーがアプリを開く。システムは「ドラッグ＆ドロップ専用窓」のみを表示する。
  2. ユーザーがCSVファイルを窓にドロップする。
  3. システムがファイルを読み込み、内部でデータ構造化を行う。
  4. システムが「列選択メニュー」と「データテーブル（初期状態）」を表示する。


- **例外フロー**:
- 1a. CSV以外のファイルが投入された場合、システムはエラー警告を表示し、初期状態を維持する。



### UC-2: 表示列の選択

- **アクター**: ユーザー
- **事前条件**: UC-1が完了し、データの読み込みに成功していること。
- **メインフロー**:
  1. ユーザーが列名の一覧（チェックボックス形式等）を確認する。
  2. ユーザーが表示したい列のチェックをON/OFFする。
  3. システムは、チェックされた列のみをテーブルに表示し、即座に画面を更新する。



### UC-3: データのソート（並び替え）

- **アクター**: ユーザー
- **事前条件**: テーブルにデータが表示されていること。
- **メインフロー**:
  1. ユーザーが任意の列ヘッダーをクリックする。
  2. システムは「昇順」でデータを並び替える。
  3. ユーザーが再度同じヘッダーをクリックすると、システムは「降順」に切り替える。
  4. システムは並び替えた結果をテーブルに反映する。



### UC-4: データのフィルタリング（絞り込み）

- **アクター**: ユーザー
- **事前条件**: テーブルにデータが表示されていること。
- **メインフロー**:
  1. ユーザーが検索入力欄に値を入力する（例：特定の文字列、数値など）。
  2. システムは入力された値に基づいて、リアルタイム（または確定操作後）に行を絞り込む。
  3. システムは条件に一致する行のみをテーブルに表示する。



### UC-5: 加工済みデータのエクスポート

- **アクター**: ユーザー
- **事前条件**: テーブルにデータが表示されていること（ソートやフィルタリングが適用されていてもよい）。
- **メインフロー**:
  1. ユーザーが「エクスポート」ボタンをクリックする。
  2. システムは、現在テーブルに表示されている「列」「行の順序」「絞り込み結果」を保持したCSVファイルを生成する。
  3. システムはユーザーのブラウザを通じてファイルをダウンロードさせる。



---

## 5. UIの状態遷移イメージ

1. **初期状態 (Start)**
- 画面中央に大きなドラッグ＆ドロップエリアのみが存在。
- メニューやボタンなどは非表示。


2. **データ読み込み後 (Data Loaded)**
- 上部：列選択用のチェックボックス群。
- 中部：検索/フィルタ入力欄、エクスポートボタン。
- 下部：データ表示テーブル。


3. **操作中 (Processing)**
- ユーザーの操作に応じてテーブルの内容が動的に変化。


4. **出力 (Export)**
- 現在の画面で見えている状態のデータをファイルとして保存。
